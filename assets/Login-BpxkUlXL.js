import{r as l,j as e,u as g,a as d,B as h}from"./index-CUEGcMJ-.js";import{u as j,o as w,L as y,C as p,E,c as N,a as x,e as F,s as v,b as S}from"./LoaderForCompenent-ByV7twmK.js";import{F as k,a as C}from"./index-CjXW_ke5.js";import{u as L}from"./useAuth-Djn31ddF.js";import"./request-pwnUz3dL.js";import"./iconBase-CgGa7OXU.js";const u=l.forwardRef(({errorMessage:a,...o},i)=>{const[r,t]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{...o,ref:i,type:r?"text":"password",className:`block w-[100%] rounded-[5px] p-[5px] ${a?"border-[red]":!a&&o.value?"border-[green]":"border-[grey]"} border-[1px] bg-transparent text-main_color outline-none placeholder:text-[grey]`}),e.jsx("button",{type:"button",onClick:()=>t(!r),className:"absolute right-[10px] top-[50%] block translate-y-[-50%] text-[#000]",children:r?e.jsx(k,{}):e.jsx(C,{})})]}),a&&e.jsx("p",{className:"text-[10px] text-[red]",children:a})]})});u.displayName="PasswordInput";const I=N().shape({email:x().matches(F,"Enter correctly email (email@gmail.com) ").required(""),password:x().min(8).required("")}),P={email:"",password:""};function A(){const a=g(),{token:o,setToken:i}=L(),[r,t]=l.useState(!1),{handleSubmit:f,control:m,formState:{errors:c}}=j({mode:"onChange",defaultValues:P,resolver:w(I)});l.useEffect(()=>{o&&a(d.admin)},[o,a]);const b=async n=>{try{t(!0);const s=await v(n);i(s.token),a(d.admin),t(!1)}catch(s){t(!0),h.error(s.message,S),t(!1)}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[r&&e.jsx(y,{}),!r&&e.jsxs("section",{className:"w-[350px] rounded-[30px] bg-[#fff] p-[40px]",children:[e.jsx("h2",{className:"mb-[20px] text-[25px] font-bold italic text-main_color",children:"Login"}),e.jsxs("form",{className:"flex w-[100%] flex-col gap-[10px]",onSubmit:f(b),children:[e.jsx(p,{name:"email",control:m,render:({field:n})=>{var s;return e.jsx(E,{...n,errorMessage:(s=c.email)==null?void 0:s.message,placeholder:"Enter email"})}}),e.jsx(p,{name:"password",control:m,render:({field:n})=>{var s;return e.jsx(u,{...n,errorMessage:(s=c.password)==null?void 0:s.message,placeholder:"Enter password"})}}),e.jsx("button",{type:"submit",className:"rounded-[10px] bg-[#8855ff] p-[10px] text-[16px] font-bold text-[#fff]",children:"Submit"})]})]})]})}export{A as default};
