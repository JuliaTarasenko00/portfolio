import{r as i,j as e,u as f,a as c,B as b}from"./index-BWIJrdA2.js";import{u as h,o as g,C as d,E as j,c as w,a as p,e as y,s as E,b as N}from"./styleForToastity-CH-yn1OZ.js";import{F as v,a as F}from"./index-CsRGb1A7.js";import{u as S}from"./useAuth-DxaK3rzK.js";import"./request-pwnUz3dL.js";import"./iconBase-_fU4bSfk.js";const x=i.forwardRef(({errorMessage:a,...t},l)=>{const[r,n]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{...t,ref:l,type:r?"text":"password",className:`block w-[100%] rounded-[5px] p-[5px] ${a?"border-[red]":!a&&t.value?"border-[green]":"border-[grey]"} border-[1px] bg-transparent text-main_color outline-none placeholder:text-[grey]`}),e.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-[10px] top-[50%] block translate-y-[-50%] text-[#000]",children:r?e.jsx(v,{}):e.jsx(F,{})})]}),a&&e.jsx("p",{className:"text-[10px] text-[red]",children:a})]})});x.displayName="PasswordInput";const k=w().shape({email:p().matches(y,"Enter correctly email (email@gmail.com) ").required(""),password:p().min(8).required("")}),C={email:"",password:""};function L(){const a=f(),{token:t,setToken:l}=S(),{handleSubmit:r,control:n,formState:{errors:m}}=h({mode:"onChange",defaultValues:C,resolver:g(k)});i.useEffect(()=>{t&&a(c.admin)},[t,a]);const u=async o=>{try{const s=await E(o);l(s.token),a(c.admin)}catch(s){b.error(s.message,N)}};return e.jsxs("section",{className:"w-[350px] rounded-[30px] bg-[#fff] p-[40px]",children:[e.jsx("h2",{className:"mb-[20px] text-[25px] font-bold italic text-main_color",children:"Login"}),e.jsxs("form",{className:"flex w-[100%] flex-col gap-[10px]",onSubmit:r(u),children:[e.jsx(d,{name:"email",control:n,render:({field:o})=>{var s;return e.jsx(j,{...o,errorMessage:(s=m.email)==null?void 0:s.message,placeholder:"Enter email"})}}),e.jsx(d,{name:"password",control:n,render:({field:o})=>{var s;return e.jsx(x,{...o,errorMessage:(s=m.password)==null?void 0:s.message,placeholder:"Enter password"})}}),e.jsx("button",{type:"submit",className:"rounded-[10px] bg-[#8855ff] p-[10px] text-[16px] font-bold text-[#fff]",children:"Submit"})]})]})}export{L as default};
